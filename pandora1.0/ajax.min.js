$.extend({ajax:function(s){s=s||{};var q=new XMLHttpRequest(),b=s.url,h=s.data,a=s.method||"GET",k=s.type?s.type.toLowerCase():"text",p=s.success||function(){},l=s.error||function(e){throw e},f=0,n=s.timeout||15000;var o="";if(h){for(var d in h){var c=h[d];if($.isArray(c)){for(var g=0;g<c.length;g++){o+=d+"="+c[g]+"&"}}else{o+=d+"="+c+"&"}}}if(a==="GET"&&o){b+="?"+o}q.open(a,b,true);var r=setTimeout(function(){if(f==0){q.abort()}},n);if(a=="POST"){q.setRequestHeader("Content-type","application/x-www-form-urlencoded");q.setRequestHeader("Content-length",o.length);q.setRequestHeader("Connection","close")}q.onreadystatechange=function(){if(q.readyState==4){f=4;clearTimeout(r);if(q.status==200){try{var i=q.responseText;if(i){if(k==="json"){p(JSON.parse(i))}else{if(k==="xml"){var m,t;if(window.DOMParser){t=new DOMParser();m=t.parseFromString(h,"text/xml")}else{l("can not parse xml")}if(!m||!m.documentElement||m.getElementsByTagName("parsererror").length){l("Invalid XML: "+i)}p(m)}else{p(i)}}}}catch(u){l(u)}}else{l(q.status)}}};try{q.send(o)}catch(j){l(j)}},});